<div class="container mt-4 user-tournaments-view">
  <hr>

  <!-- =================== TORNEOS ACTIVOS =================== -->
  <div class="row g-4 mt-4 active-tournaments-section">
    <h3 class="mb-3">ğŸ† Torneos Inscriptos</h3>

    <!--  Mostrar mensaje si no hay torneos -->
    <div *ngIf="!torneosActivos || torneosActivos.length === 0"
      class="alert alert-warning text-center my-3 py-2 rounded-3 fw-semibold m-0">
      <i class="bi bi-emoji-frown"></i> No te has inscripto a ningÃºn torneo.
    </div>

    <!--  Mostrar torneos si existen -->
    <div class="col-md-6" *ngFor="let torneo of torneosActivos">
      <div class="card mb-3 border-0 shadow-sm rounded-4 tournament-card">

        <!-- HEADER -->
        <div class="tournament-header d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center bg-primary text-white px-3 py-2 rounded-top gap-2">
          <strong class="text-wrap">{{ torneo.name }}</strong>
          <span class="badge bg-warning text-dark fw-semibold">
            EdiciÃ³n {{ torneo.startDate | date:'yyyy' }}
          </span>
        </div>

        <!-- BODY -->
        <div class="card-body py-3">
          <div class="row">

            <!-- LOGO -->
            <div class="col-3 col-sm-2 d-flex align-items-center justify-content-center tournament-thumb">
              <img [src]="apiUrl + torneo.imageUrl" (error)="onImgError($event, 'assets/img/torneoDefault.png')"
                width="50" alt="Torneo">
            </div>

            <!-- INFO -->
            <div class="col-9 col-sm-10">
              <div class="row small gy-2 tournament-meta">
                <div class="col-md-6">
                  <span>ğŸ“… <strong>Inicio:</strong> {{ torneo.startDate | date }}</span>
                </div>
                <div class="col-md-6">
                  <span>ğŸ“… <strong>Fin:</strong> {{ torneo.endDate | date }}</span>
                </div>
                <div class="col-md-6">
                  <span>ğŸ“ <strong>Lugar:</strong> {{ torneo.location || 'No especificado' }}</span>
                </div>
                <div class="col-md-6">
                  <span>ğŸ·ï¸ <strong>CategorÃ­a:</strong> {{ getNombres(torneo.categories) }}</span>
                </div>
                <div class="col-md-6">
                  <span>ğŸ³ <strong>Modalidad:</strong> {{ getNombres(torneo.modalities) }}</span>
                </div>
                <div class="col-md-6">
                  <span>ğŸ‘¬ <strong>Rama:</strong> {{ getNombres(torneo.branches) }}</span>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>


  <hr>

  <!-- =================== TORNEOS FINALIZADOS =================== -->
  <div class="finished-tournaments-section mt-4">
    <h3 class="text-center mb-4">ğŸ Torneos Jugados</h3>

    <div class="table-responsive">
      <div class="table-wrapper">

        <table
          class="table table-rounded table-hover table-sm border table-bordered table-vmiddle text-center align-middle tournaments-table">
          <thead class="bg-light align-middle">
          <tr class="fw-bold">
            <th>ID</th>
            <th>Foto</th>
            <th>Nombre</th>
            <th>Fecha</th>
            <th>Lugar</th>
            <th>Modalidad</th>
            <th>CategorÃ­a</th>
            <th>Resultados</th>
            <th>Acciones</th>
          </tr>
        </thead>

        <tbody>

          <tr *ngFor="let torneo of torneosFinalizados">

            <td>{{ torneo.tournamentId }}</td>

            <td>
              <img [src]="apiUrl + torneo.imageUrl" (error)="onImgError($event, 'assets/img/torneoDefault.png')"
                alt="Foto" style="width: 40px; height: 40px" class="rounded-circle" />
            </td>

            <td>{{ torneo.name }}</td>

            <td>{{ torneo.startDate | date }}</td>

            <td>{{ torneo.location }}</td>

            <td>{{ getNombres(torneo.modalities) }}</td>
            <td>{{ getNombres(torneo.categories) }}</td>

            <td>{{ torneo.resultados || 0 }}</td>

            <td>
              <button class="btn btn-sm px-2" [routerLink]="['/tournament-summary', torneo.tournamentId]"
                style="background-color: rgba(0, 123, 255, 0.1); color: #007bff; border-radius: .5rem;">
                <i class="fa-solid fa-eye"></i>
              </button>
            </td>

          </tr>

          <!-- SIN TORNEOS -->
          <tr *ngIf="(!torneosFinalizados || torneosFinalizados.length === 0)">
            <td colspan="9">
              <div class="alert alert-warning text-center my-3 py-2 rounded-3 fw-semibold m-0">
                <i class="bi bi-emoji-frown"></i> No hay torneos para mostrar.
              </div>
            </td>
          </tr>

        </tbody>
        </table>
      </div>
    </div>
  </div>

</div>
