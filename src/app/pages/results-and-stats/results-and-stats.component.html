<div class="container mt-4">

  <!-- T√≠tulo y descripci√≥n -->
  <div class="mb-4 text-center">
    <h2 class="text-primary fw-bold">üìä Resultados y Estad√≠sticas de Jugadores</h2>
    <p class="text-muted fs-6 mb-0">
      Visualiza el desempe√±o de cada jugador por torneo. Filtra por categor√≠a, modalidad y rama para ver promedios
      espec√≠ficos y comparativos entre torneos.
    </p>
  </div>

  <!-- Filtros -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <div class="row g-3 align-items-end">
        <div class="col-md-3">
          <p class="form-label">Categor√≠a</p>
          <select class="form-select form-select-sm" [(ngModel)]="selectedCategory" (change)="onFilterChange()">
            <option value="">Todas</option>
            <option *ngFor="let c of categories" [value]="c.categoryId">{{ c.name }}</option>
          </select>
        </div>

        <div class="col-md-3">
          <p class="form-label">Rama</p>
          <select class="form-select form-select-sm" [(ngModel)]="selectedBranch" (change)="onFilterChange()">
            <option value="">Todas</option>
            <option value="Masculino">Masculino</option>
            <option value="Femenino">Femenino</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabla horizontal de promedios por jugador -->
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-bordered table-sm text-center align-middle">
          <thead class="table-light">
            <tr>
              <th class="text-primary">Jugador</th>
              <th *ngFor="let torneo of allTournaments" class="text-secondary">{{ torneo }}</th>
              <th class="table-secondary">Total Promedio</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let player of playerStats">
              <td class="fw-bold text-primary">{{ player.name }}</td>
              <td *ngFor="let torneo of allTournaments">
                {{ getPlayerAverage(player, torneo) !== null ? (getPlayerAverage(player, torneo) | number:'1.0-0') : '-'
                }}
              </td>
              <td class="fw-bold table-secondary">
                {{ player.totalAverage | number:'1.0-0' }}
              </td>
            </tr>
            <tr *ngIf="!playerStats.length">
              <td [attr.colspan]="allTournaments.length + 2" class="text-muted py-3">No hay datos para mostrar.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>
